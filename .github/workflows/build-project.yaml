name: Building and distributing RF-BPA
run-name: RF-BPA build triggered by ${{ github.actor }} on branch ${{ github.ref }}
on: [ push ]

env:
  IMAGE_NAME: rf-bpa

jobs:
  Build-and-distribute:
    runs-on: ubuntu-latest
    steps:
      - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
      - name: "Check out repository: ${{ github.repository }}"
        uses: actions/checkout@v4
      - name: Set up Java
        uses: actions/setup-java@v2
        with:
          java-version: 17
          distribution: "temurin"
      - name: let us also build
        run: ./gradlew clean build
      - name: Build image
        run: docker build --tag $IMAGE_NAME --label "runnumber=${GITHUB_RUN_ID}" ./web/
      - name: Log in to registry
        run: echo "${{ secrets.GITHUB_TOKEN }}" | docker login ghcr.io -u ${{ github.actor }} --password-stdin
      - run: echo "üçè This job's status is ${{ job.status }}."
